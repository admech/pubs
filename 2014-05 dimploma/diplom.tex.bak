\documentclass[12pt]{article}

\usepackage{cmap} % Улучшенный поиск русских слов в полученном pdf-файле
\usepackage{ucs}
\usepackage[T2A]{fontenc} % Поддержка русских букв
\usepackage[utf8x]{inputenc} % Включаем поддержку UTF8
\usepackage[russian]{babel}  % Включаем пакет для поддержки русского языка

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{graphicx}

\usepackage{cite}
\usepackage{indentfirst} % Красная строка

\newcommand {\mys}[1]{$\spadesuit$ #1\\}
\newcommand {\mysl}[1]{$\spadesuit$ #1}
\newcommand {\mysf}[1]{\\$\spadesuit$ #1\\}

\usepackage{geometry} % see geometry.pdf on how to lay out the page. There's lots.
\geometry{a4paper} % or letter or a5paper or ... etc
% \geometry{landscape} % rotated page geometry

% See the ``Article customise'' template for come common customisations

\title{Это же дипломная работа,\\к которой вы шли пять лет!}

\author{Герасимов К.\\ \\Руководитель Косенко И.И.}
\date{} % delete this line to display the current date

\begin{document}

\thispagestyle{empty}
\newpage
\begin{centering}

\textbf{
МОСКОВСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ\\
ИМЕНИ М.В. ЛОМОНОСОВА\\*
Механико-математический факультет\\
Кафедра теоретической механики и мехатроники}

\begin{figure}[h]
\centering
\includegraphics[width=4cm]{mmlogo.png}
\end{figure}
\bigskip
\bigskip

{\Huge ДИПЛОМНАЯ РАБОТА}

\bigskip
\bigskip

{\LARGE Феерически своевременно\\проведённые изыскания}
\bigskip
\bigskip

{\LARGE Hilariously beforhand calculations}

\medskip

\bigskip

студента 521 группы\medskip

Герасимова Кирилла Вячеславовича\\
\medskip

\vfill

\begin{flushright}
Научный руководитель: \\
д. ф.-м. н. профессор И. И. Косенко\\



\end{flushright}
\bigskip
\bigskip
\vspace{\fill}
\vspace{\fill}
\vspace{\fill}
\vspace{\fill}

Москва \number\year
\clearpage




\bigskip
\end{centering}

\tableofcontents
\newpage
TO DO:

1) Bibliography links [...] -> ?\\
2) рис. №... -> целостность
\newpage


\section{Введение}

В работе рассматривается подход к физически-ориентированному моделированию экипажа с омниколесами с использованием технологии Modelica.\\

Омниколесо - это колесо, на ободе которого расположены ролики. Имеются оси, закрепленные на колесе, а сами ролики свободно вращаются вокруг этих осей. В отечественной литературе такие системы называют также роликонесущими колесами.\\

Литература, в связи с тем, что рассматриваемый вид колес изобретен не столь давно, не слишком обширна. Теоретические исследования динамики ограничиваются модельными неголономными постановками, не учитывающими, в частности, динамику роликов [...]. Говоря точнее, эти подходы предлагают считать ролики бесконечно малыми и "распределять", таким образом, неглономную связь "равномерно" по всему ободу колеса. В результате они приближенно описывают сложную систему - омниколесо - как идеализированный объект с меньшим количеством степеней свободы и иной геометрией масс и динамикой. Представлены практические работы, авторы которых рассматривают сконструированные ими же экипажи и исследуют вопросы управления их движением. Изучение физических моделей, принимающих во внимание динамику всех частей омни-экипажа (в том числе, роликов), затруднено резким ростом количества степеней свободы системы при увеличении количества роликов на колесе.\\

Наша цель здесь - построить численную модель динамики омниколесного экипажа на горизонтальной плоскости, учитывающую динамику плтформы экипажа, колес и роликов. Мы пренебрегаем трением в шарнирах и принимаем модель кулоновского трения в контакте с плоскостью. Мы используем и расширяем ранее представленную [...] библиотеку трехмерной динамики систем тел. Особое значение для данной реализации имеет применяемый способ представления односторонней связи.

\section{Обзор}
\mysl{Здесь про статьи:
\begin{enumerate}
\item Masayoshi Wada - holonomic wheelchair
\item Donald S. Eng - particle filter
\item Yu. G. Martynenko and A. M. Formal’skii - On the Motion of a Mobile Robot with Roller-Carrying Wheels
\item A. Gfrerrer - Geometry and kinematics of the Mecanum wheel
\item Viktor Kálmán - Controlled Braking for Omnidirectional Wheel
\item ... - omni-wheel: a poractical approach
!!!
\item J. Tobol, F. Herrmanna - Object-oriented modelling and control of vehicles with omni-directional wheels
!!!
короткая будто бы аннотация. но где же полный текст?\\
\item A.A. Zobova, Ya.V. Tatarinov - The dynamics of an omni-mobile vehicle
\end{enumerate}}

\section{Постановка задачи. Построение физически-ориентированной компьютерной модели}

При построении модели омниэкипажа мы учитываем, что её основные параметры - количество роликов на каждом колесе и угол наклона оси симметрии ролика к плоскости колеса. Для простоты и наглядности рассмотрим омниколесо с четырьмя роликами. Кроме того, для простоты оси симметрии самих роликов расположим в плоскости колеса, см. рис. 1. Эти основные параметры достаточно легко изменять. Будем считать также, что ролики расположены на колесе таким образом, что проекция кривой контакта - внешней границы колеса вместе с роликами - на плоскость колеса представляет собой последовательность неперекрывающихся сегментов, каждый из которых соответствует некоторому ролику. Эти сегменты связаны таким образом, например, что нормальная относительная скорость в контакте равна нулю в момент переключения роликов. Благодаря этому, нормальные удары отсутствуют. Касательная составляющая скорости относительного скольжения непрерывна при нулевом угле наклона осей роликов к плоскости колеса. Однако касательная сила трения может иметь разрыв в худшем случае первого рода, если ось симметрии ролика наклонена к плоскости колеса. Таким образом, линейная и угловая скорости колеса непрерывны в момент переключения контакта ролика. Аналогичное утверждение верно также и для роликов. Тогда касательные удары также отсутствуют.\\

Отметим дополнительно, что кривая, образуемая возможными точками контакта, в проекции на плоскость колеса является окружностью радиуса $R$, см. рис. 1. Таким образом, поступательное и вращательное движение непрерывны. Окончательно можем заключить, что движение остается невырожденным в момент переключения контакта с одного ролика на другой, по крайней мере, когда колесо вертикально.\\

Переходя на следующий структурный уровень, рассмотрим несколько омниколес, соединенных с движущейся платформой экипажа (см. рис. 2), посредством шарнирной связи. Эта последняя реализуется как класс в смысле языка Modelica, представленный ранее [...]. В нашем случае количество колес может быть три или больше. Они могут располагаться на платформе в разных конфигурациях. Мы рассматриваем здесь, для примера, систему с тремя колесами, расположенными в вершинах правильного треугольника, лежащего в плоскости платформы (см. рис. 2), параллельной координатной плоскости $ZX$. Ось $Y$ полагаем вертикальной.\\

\subsection{Динамическая модель ролика}

Мы называем роликом осесимметричное твердое тело в форме веретена, поверхность которого задается в осях $Oxyz$, связанных с телом (см. рис. 3) уравнением
\begin{equation}
	x^2 + (\sqrt{y^2+z^2} + R_1)^2 = R,
\end{equation}
где $R$ - внешний радиус омниколеса, $R_1 = R\cos\alpha$ - расстояние от центра ролика до центра колеса, $\alpha = \frac{\pi}{n}$ - половина угла с вершиной в центре колеса, опирающегося на дугу ролика, $n$ - количество роликов на колесе.\\

Динамика поступательно-вращательного движения реализуется в численной модели с помощью уравнений Ньютона-Эйлера [...]. Ориентация ролика в пространстве представляется кватернионами [...].\\

\subsection{Отслеживание контакта}

Алгоритм отслеживания точки контакта играет важнейшую роль для точности и вычислительной эффективности компьютерной модели процесса контактирования ролика и горизонтальной плоскости. Для моделирования и симуляции динамики твердого тела с односторонней связью мы применяем технологию из [...]. Возможно применять систему известных неявных дифференциально-алгебраических уравнений при реализации объекта, отслеживающего контакт на Modelica. Однако эти уравнения вырождаются в вершинах роликов $x = \pm R\sin\alpha$ (в локальных для ролика координатах, см. рис. 1). Как правило, подобное вырождение приводит к аварийному завершению процесса симуляции.\\

В рассматриваемом случае ролика-веретена на горизонтальной плоскости оказывается возможно устроить процедуру отслеживания точки контакта достаточно простым способом. Можно указать явный способ вычисления ближайшей к горизонтальной плоскости точки ролика $P_B$ (см. рис. 4). Ближайшая же к ролику точка плоскости $P_A$ является, очевидно, вертикальной проекцией точки ролика $P_B$ на плоскость.\\

Обозначим $\vec{i} = (1,0,0)^T$ единичный вектора вдоль оси $O_Bx_B$ системы координат, связанной с роликом (рис. 4), записанный в осях $O_Bx_By_Bz_B$. Пусть $T_B$ - матрица поворота от инерциальной системы координат к осям ролика. Первая в нашем случае совпадает с неподвижными осями $O_Ax_Ay_Az_A$, связанными с плоскосью. Также, пусть $\vec{r_B}$ - координаты центра масс ролика в неподвижных осях, и $\vec{n_A} = (0,1,0)^T$ - вектор восходящей нормали к горизонтальной плоскости.\\

Примем обозначения для тел: $A$ - для плоскости, $B$ - для ролика. Пусть $\vec{d}$ - горизонтальный единичный вектор, определяемый как
$$\vec{d} = \frac{T_B\vec{i_B}\times\vec{n_A}}{\vert T_B\vec{i_B}\times\vec{n_A}\vert}.$$

Таким образом, вектор $\vec{O_BO}$ должен иметь длину $R_1$, и определяться как
$$\vec{O_BO} = R_1\vec{d}\times T_B\vec{i_B}.$$

Здесь O - центр кривизны дуги, образующей одну сторону вертикального сечения ролика (см. рис. 4). Этот вектор лежит в плоскости колеса и в вертикальной влоскости. Таким образом, из рис. 4 очевидно, что точка $P_B$ поверхности ролика - это
\begin{equation}
\label{rPB}
\vec{r_{P_B}} = \vec{r_B} + R_1\vec{d}\times T_B\vec{i_B}-R\vec{n_a},
\end{equation}
поскольку $P_B$ лежит на одной вертикальной прямой с точкой $O$. Координаты $P_A$ тогда
\begin{equation}
\vec{r_{P_A}} = (x_{P_B},0,z_{P_B})^T.
\end{equation}

Описанная процедура верна лишь если угол наклона $T_A\vec{i_B}$ к горизонтальной плоскости по величине не превосходит $\alpha$. В противном случае надо полагать $P_B = B_-$, где $B_-$ - левая (см. рис. 4) вершина ролика, в случае, если угол наклона больше $\alpha$, либо $P_B = B_+$, где $B_+$ - правая вершина для угла наклона, меньшего $-\alpha$.\\

И наконец, условие, при имеет место контакт между роликом и плоскостью, может быть записано как
\begin{equation}\label{contact_1}
\vert T_B\vec{i_B}\cdot\vec{n_A}\vert\leq\sin\alpha.
\end{equation}

Это условие, однако, выполняется и для самого нижнего, и для самого верхнего ролика одновременно. Чтобы отбросить верхний случай, нужно добавить ещё одно условие:
\begin{equation}\label{contact_2}
y_B<R,
\end{equation}
где $y_B$ - высота центра масс ролика над горизонтальной плоскостью.\\

Таким образом, совокупность условий $\eqref{contact_1}$ и $\eqref{contact_2}$ эквивалентна случаю контакта. В ином случае нужно рассматривать условие равенства силы реакции нулю. Действительно, по принципу Синьорини, для каждого ролика верно одно из двух утверждений: а) ролик в контакте, относительная скорость по нормали равна нулю; и б) контакта нет, реакция (и нормальная, и касательная) равна нулю.\\

Условие а) можно записать различными способами. Например, с геометрической точки зрения, наличие контакта равносильно равенству
\begin{equation}
\label{contact_geom}
y_{P_B} = 0.
\end{equation}
Отсутствие же его эквивалентно
$$F_n = 0,$$
где $F_n$ - нормальная составляющая силы реакции, действующей на ролик в точке $P_B$.\\

Практика вычислений показывает, что уравнение контакта в форме \eqref{contact_geom} вызывает, как правило, аварийное завершение расчета динамической модели ролика. Подобный исход получаем и при использовании формы 
$$v_n = 0,$$
условия а). Здесь $v_n$ - нормальная составляющая относительной скорости в точке контакта. И только уравнение вида 
$$\dot{\vec{v_n}} = 0$$ приводит к искомому результату: объект, реализующий контактное взаимодействие работает правильно в течение всего процесса симуляции. Напомним, что реализация всего процесса контактирования полагает контакт точечным.\\

Для каждого ролика омниэкипажа модель силы трения "включается" на период, когда он находится в контакте. В разработанной модели использован закон трения Кулона-Амонтона. Мы используем известное кусочно-заданное приближение [...] точного закона сухого трения. Вообще, реализация односторонней связи основана на результатах, представленных в [...].\\

Если угол наклона оси симметрии ролика к плоскости колеса ненулевой, то некоторые соотношения, указанные выше необходимо уточнить. В таком случае форма роликов должна быть растянута вдоль обода колеса. Пусть положение $\vec{r_O} \in \Re^3$ центра $O$ колеса (см. рис. 4). Введем вспомогательный базис 
\begin{equation*}
\vec{i}^{\hspace{2pt}\prime} = T_B \left( \begin{array}{ccc} 1\\0\\0 \end{array}\right),\hspace{10pt}
\vec{j}^{\hspace{1pt}\prime} = \frac{\vec{r_O}-\vec{r_{O_B}}}{\vert\vec{r_O}-\vec{r_{O_B}}\vert},\hspace{10pt}
\vec{k}^\prime = \vec{i}^{\hspace{2pt}\prime}\times\vec{j}^{\hspace{2pt}\prime}.
\end{equation*}

Соответствующая матрица перехода имеет вид $T^\prime = (\vec{i}^\prime\vec{j}^\prime\vec{k}^\prime)$, где $\vec{i}^\prime, \vec{j}^\prime, \vec{k}^\prime$ полагаются векторами-столбцами. Эта матрица определяет
 замену координат от системы отсчета, связанной с телом А, к системе, определяемой базисом $B^\prime = \left\{\vec{i}^\prime,\vec{j}^\prime,\vec{k}^\prime\right\}$ как
$$\left(\begin{array}{ccc}x_A\\y_A\\z_A\end{array}\right) = T^\prime\left(\begin{array}{ccc}x^\prime\\y^\prime\\z^\prime\end{array}\right).$$
 
Чтобы свести анализ к уже рассмотренному выше случаю $\beta = 0$, необходимо повернуть базис $B^\prime$ вокруг оси $\vec{j}^\prime$ на угол $-\beta$ так, что после поворота новый базис $B = \{\vec{i},\vec{j},\vec{k}\}$ будет оринтирован по плоскости колеса, т.е. его векторы $\vec{i}, \vec{j}$ будут лежать в этой плоскости. Этому повороту соответствует матрица 
$$\left(\begin{array}{ccc}
\cos\beta & 0 & -\sin\beta \\
0         & 1 & 0          \\
\sin\beta & 0 & \cos\beta  \\
\end{array}\right))$$
в базисе $B^\prime$. Затем в базисе тела $A$ поворот единичного вектора $\vec{i}^\prime$ представляется как $\vec{i} = T^\prime S(1,0,0)^T$. Положим также $\vec{j} = \vec{j}^\prime, \vec{k} = \vec{i}\times\vec{j}$. Очевидно, $\vec{k} = \vec{d}$, где $\vec{d}$ - единичный вектор, определенный выше.\\

Таким образом, основываясь на выражении \eqref{rPB} и принимая во внимание рис. 4, можно заключить, что для случая $\beta\neq 0$ имеет место следующий результат:
\begin{equation}
\vec{r_{P_B}} = \vec{r_B}+R_1\vec{j} - R\vec{n_A} - \frac{R_1\tan\beta\sin\gamma}{\sqrt{1-\sin^2\gamma}}\vec{j}\times\vec{i},
\end{equation}
где угол $\gamma$ удовлетворяет уравнению
$$\sin\gamma = \vec{i}\cdot\vec{n_A}.$$

\subsection{Модель экипажа}
Процесс сборки модели экипажа производится в два этапа: а) сборка модели одного омниколеса, содержащего ступицу и ролики; б) сборка всего экипажа посредством создания экземпляров классов омниколеса из п. а) в модели-контейнере, соответствующей экипажу (вместе с остальными необходимыми компонентами).\\

Для соединения роликов, а точнее, объектов класса ролик, со ступицей колеса мы использеум модель шарнирной связи, разработанную ранее и представленную в [kos5]. Это класс, представляющий вращение вокруг некоторой наперед заданной оси. Исходный код всех классов и моделей для данной задачи реализован в виде библиотеки языка Modelica. Визуальное представление модели колеса см. на рис. 5. В этом примере мы приняли, для простоты и ясности $n = 4$.\\

Модель, представляющая основной интерес - это модель всего экипажа, создаваемая на второй стадии описанного процесса. Соединения между колесами и платформой также реализованы в виде класса шарнира из п. а). Эти шарниры допускают вращение без сопротивления вокруг заданной оси и не допускают сдвиг. Визуальное представление экипажа - на рис. 6. Здесь для ясности изображения объекты даны в виде одельных экземпляров. На деле же, создаются массивы роликов, колес и шарниров для произвольного $n$ и произвольного количества колес.\\

Моделирование производилось в среде Dymola. Перед вычислениями Dymola производит редукцию индекса системы дифференциально-алгебраических уравнений. Модель экипажа до редукции состоит из: а) одного твердого тела - платформы; б) $N$ (трех в рассматриваемом случае) твердых тел - ступиц колес; в) $N\cdot n$ (двенадцати) твердых тел роликов, расположенных на колесах. В соответствии, например, с [kos5], для каждого объекта твердого тела мы задаем шесть обыкновенных дифференциальных уравнений Нютона движения центра масс и семь ОДУ Эйлера для вращательного движения тела вокруг центра масс. Последние суть четыре кинематических уравнения Эйлера для кватерниона ориентации твердого тела и три уравнения динамики с угловой скоростью. То есть модель экипажа включает систему ОДУ $n(N + 1) \cdot (6+7)$ (16$\cdot$13 = 208) порядка. Кроме этого, объекты связей могут порождать дополнительные дифференциальные уравнения.\\

Колеса, являющиеся частью экипажа, неизбежно сохраняют вертикальное положение. Благодаря этому свойству алгоритм отслеживания контакта, описанный выше, работает правильно.\\

\section{Упрощенная модель для верификации}
\mys{Здесь про Борисова с картинками, обозначениями и уравнениями}

\section{Верификация}
\subsection{Гипотеза о близости решений}
\subsection{Два типа движений}

\section{Результаты и дальнейшая работа}

\section{Литература}

\bibliographystyle{utf8gost705u}  %% стилевой файл для оформления по ГОСТу
\bibliography{biblio}     %% имя библиографической базы (bib-файла) 


\end{document}


