\section{Переход между роликами}

\begin{figure}
    \minipage{0.5\textwidth}
        \centering
        \asyinclude{./asy/pic_overlap.asy}
        \caption{Ролики перекрываются}
        \label{fig:overlap}
    \endminipage
    \minipage{0.5\textwidth}
        \centering
        \asyinclude{./asy/pic_change.asy}
        \caption{Переход между роликами}
        \label{fig:change}
    \endminipage
\end{figure}
Уравнения (\ref{eq:full_system}) описывают динамику системы на промежутках времени, в течение которых не происходит смены роликов. 
При переходе любого колеса с одного ролика на другой коэффициенты уравнений терпят разрыв втоого рода из-за выражений $\rho_i = l\cos\chi_i-r$ в знаменателе.

Заметим, что в технических реализациях омни-колес ситуация $\rho_i = 0$ никогда не имеет места, т.к. концы роликов усекаются (в частности, потому что оси роликов в реальных системах имеют ненулевую толщину и должны быть закреплены в колесах). Для того, чтобы в каждый момент в контакте между колесом и плоскостью был ролик, их располагают в два или больше рядов. Это приводит, впрочем, к скачкам расстояния между точкой контакта и центром масс ситемы в моменты смены роликов.

Поэтому для начала, мы усечем ролики (см. рис.~\ref{fig:overlap}), но оставим их оси в одной плоскости, допуская пересечение тел роликов в пространстве и пренебрегая им. Переход между роликами одного колеса будет происходить при значении угла $\chi_i = \frac{2\pi}{n}$. Колесо с усеченными роликами определим, располагая ось ролика на расстоянии $r = l\cos\frac{\pi}{n-1}$ от центра колеса (знаменатель на единицу меньше количества роликов), а его поверхность задавая как фигуру вращения дуги окружности радиуса $l$ с улом раствора $\frac{2\pi}{n}$ вокруг этой оси, замкнутую соответствующими дисками.

Кроме этого, при смене контакта происходит мгновенное наложение связи на вновь вошедший в контакт ролик и снятие её с освободившегося. В настоящей работе будем считать, что ролик, входящий в контакт, мгновенно оказывается закручен до той же угловой скорости, до которой закручен освобождающийся ролик, а последний мгновенно прекратит собственное вращение. Таким образом, мы будем рассматривать только движение роликов, находящихся в контакте.

Для этого, отбросим уравнения
$$
\Lambda\dot{\nu}_{ni+j} = -\dot{\nu}_3\sin(\chi_i+\kappa_j) - \dot{\chi_i}\nu_3\cos(\chi_i+\kappa_j), \quad i = 1..n, j = 2..n,
$$
описывающие движение свободных роликов, и при переходе ($\chi_i = \chi_i^+$) сохраним значения $\nu_1$, $\nu_2$, 
$\nu_3$, заменим $\chi_i$ с $\chi_i^+$ на $\chi_i^-$ (см. рис.~\ref{fig:change}), а $\dot\chi_i$ пересчитаем по уравнениям связей.
